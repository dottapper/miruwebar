# コントリビューションガイド

本プロジェクトでは、既存 Design を守りながら安全に機能追加するため、以下を必須ルールとします。

## 基本原則

- 新規ページ: 既存 Design を必ず共通化（共通レイアウト/デザイントークン/共通コンポーネントを継承）
- 既存ページ改修: UI が崩れないこと（Before/After スクショ必須）
- 新規ページは必ず「戻る」ボタンを設置し、現在地（タイトル/パンくず）を表示
- ドキュメント同期: ルート追加/変更は `docs/routes.md`、仕様決定は `docs/adr/`、UI 変更は本 README を必ず更新

## ブランチ/PR 運用

### メインブランチ
- **`indexeddb-storage-refactor`** - 現在のメインブランチ（最新機能を含む）
- 直コミット禁止。feature ブランチ → PR でのマージのみ

### ブランチルール
- feature ブランチは `indexeddb-storage-refactor` から作成
- PR にスクショ（PC/モバイル）と影響範囲の記載が必須
- CODEOWNERS により、UI/共通スタイル/主要導線の変更はオーナー承認必須
- API/サーバー構成の変更は README の「サーバー構成」章を更新し、影響範囲を明記

## デザイン影響アラート（重要）

- 変更が他ページや共通スタイルに波及する場合は、PR 上で必ず事前確認を取ること
  - メンション: @dottapper（確認依頼）
  - ラベル: `design-impact`
- 確認が得られるまでマージ禁止

## 実装ルール

- 直書き色や `!important` の使用禁止。デザイントークン（CSS 変数）を使用
- 新機能は原則「新規ルート」で追加し、既存トップ導線は壊さない
- 共通ヘッダー/フッター/ページコンテナ/ボタン/フォーム等の既存コンポーネントを再利用

## 受け入れ基準（Definition of Done）

- 共通レイアウト継承済み
- 戻る導線＋現在地表示あり
- スクショ比較（PC/モバイル）で崩れなし
- スモーク/ビジュアル回帰/リンティングを通過
- PR に変更点と影響範囲を明記

## テスト（推奨）

- スモーク: スタート画面のロゴ/ボタン/タグラインの存在確認
- ビジュアル回帰: 主要画面のスクショ差分比較

詳細な PR の書式は `.github/PULL_REQUEST_TEMPLATE.md` を参照。
